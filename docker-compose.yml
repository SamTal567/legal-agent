version: '3.8'

services:
  legal-agent:
    build: .
    container_name: legal-agent
    ports:
      - "8002:8002"
    environment:
      - OPENROUTER_API_KEY=${OPENROUTER_API_KEY}
      - GEMINI_API_KEY=${GEMINI_API_KEY}
      - LLM_PROVIDER=${LLM_PROVIDER}
      - WEAVIATE_URL=${WEAVIATE_URL}
      - WEAVIATE_API_KEY=${WEAVIATE_API_KEY}
      - WEAVIATE_API_KEY=${WEAVIATE_API_KEY}
      - TAVILY_API_KEY=${TAVILY_API_KEY}
      - OLLAMA_BASE_URL=http://host.docker.internal:11434
    volumes:
      - ./legal_agent/sessions:/app/legal_agent/sessions
      - ./legal_agent/output:/app/legal_agent/output
    restart: unless-stopped
    # Optional: If you want to use a local network handling
    # network_mode: "host"
